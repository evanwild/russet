var Russet=function(){function t(){var i=this;this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.keysDown=new Set,this.mouse={x:0,y:0},this.handleResize(),window.addEventListener("resize",function(){return i.handleResize()}),window.addEventListener("mousemove",function(t){return i.handleMousemove(t)}),window.addEventListener("keydown",function(t){return i.handleKeydown(t)}),window.addEventListener("keyup",function(t){return i.handleKeyup(t)}),document.body.style.margin="0px",document.body.appendChild(this.canvas)}return t.prototype.gameLoop=function(){var t=this,i=(this.beforeDraw&&(i=(Date.now()-this.prevTime)/1e3,this.beforeDraw(i)),Math.max(this.width/this.camera.width,this.height/this.camera.height));if(this.scene){this.context.fillStyle=this.scene.color,this.context.fillRect(0,0,this.width,this.height),this.context.save(),this.context.translate(this.width/2,this.height/2),this.context.scale(i,i),this.context.translate(-this.camera.position.x,-this.camera.position.y);for(var e=0,n=this.scene.children;e<n.length;e++)n[e].draw(this.context);this.context.restore()}this.prevTime=Date.now(),window.requestAnimationFrame(function(){return t.gameLoop()})},t.prototype.startGameLoop=function(t){this.beforeDraw=t,this.prevTime=Date.now(),this.gameLoop()},t.prototype.handleResize=function(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.width=this.width*window.devicePixelRatio,this.canvas.height=this.height*window.devicePixelRatio,this.canvas.style.width="".concat(this.width,"px"),this.canvas.style.height="".concat(this.height,"px"),this.context.scale(window.devicePixelRatio,window.devicePixelRatio)},t.prototype.handleMousemove=function(t){this.mouse.x=t.x,this.mouse.y=t.y},t.prototype.handleKeydown=function(t){t.repeat||this.keysDown.add(t.code)},t.prototype.handleKeyup=function(t){this.keysDown.delete(t.code)},t.prototype.isKeyDown=function(t){this.keysDown.has(t)},t}(),Scene=function(){function t(t,i,e){void 0===e&&(e="black"),this.width=t,this.height=i,this.color=e,this.children=[]}return Object.defineProperty(t.prototype,"center",{get:function(){return{x:this.width/2,y:this.height/2}},enumerable:!1,configurable:!0}),t.prototype.makeGroup=function(){var t=new Group;return this.children.push(t),t},t.prototype.makeRect=function(t,i,e){t=new Rect(t,i,e);return this.children.push(t),t},t.prototype.makeCircle=function(t,i){t=new Circle(t,i);return this.children.push(t),t},t.prototype.makeLine=function(t,i,e,n){t=new Line(t,i,e,n);return this.children.push(t),t},t}(),Camera=function(t,i,e){this.width=t,this.height=i,this.position=e},Group=function(){function i(){this.children=[],this.position={x:0,y:0},this.anchor={x:0,y:0},this.scale=1,this.rotation=0}return i.prototype.draw=function(t){t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation),t.scale(this.scale,this.scale),t.translate(-this.anchor.x,-this.anchor.y);for(var i=0,e=this.children;i<e.length;i++)e[i].draw(t);t.restore()},i.prototype.makeGroup=function(){var t=new i;return this.children.push(t),t},i.prototype.makeRect=function(t,i,e){t=new Rect(t,i,e);return this.children.push(t),t},i.prototype.makeCircle=function(t,i){t=new Circle(t,i);return this.children.push(t),t},i.prototype.makeLine=function(t,i,e,n){t=new Line(t,i,e,n);return this.children.push(t),t},i}(),Rect=function(){function t(t,i,e){this.position=t,this.anchor={x:0,y:0},this.width=i,this.height=e,this.rotation=0,this.fill="white",this.stroke="white",this.lineWidth=0}return t.prototype.draw=function(t){t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation),t.beginPath(),t.rect(-this.anchor.x,-this.anchor.y,this.width,this.height),this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&this.lineWidth&&(t.strokeStyle=this.stroke,t.lineWidth=this.lineWidth,t.stroke()),t.restore()},t}(),Circle=function(){function t(t,i){this.position=t,this.anchor={x:0,y:0},this.radius=i,this.rotation=0,this.fill="white",this.stroke="white",this.lineWidth=0}return t.prototype.draw=function(t){t.save(),t.translate(this.position.x,this.position.y),t.rotate(this.rotation),t.beginPath(),t.arc(-this.anchor.x,-this.anchor.y,this.radius,0,2*Math.PI),this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&this.lineWidth&&(t.strokeStyle=this.stroke,t.lineWidth=this.lineWidth,t.stroke()),t.restore()},t}(),Line=function(){function t(t,i,e,n){this.x1=t,this.y1=i,this.x2=e,this.y2=n,this.anchor={x:0,y:0},this.rotation=0,this.stroke="white",this.lineWidth=0}return t.prototype.draw=function(t){t.save(),t.translate(this.x1,this.y1),t.rotate(this.rotation),t.beginPath(),t.moveTo(-this.anchor.x,-this.anchor.y),t.lineTo(this.x2-this.x1-this.anchor.x,this.y2-this.y1-this.anchor.y),t.strokeStyle=this.stroke,t.lineWidth=this.lineWidth,t.stroke(),t.restore()},t}();